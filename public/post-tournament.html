<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Post Tournament</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

  <!-- Dark Theme Styles -->
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #111827;
      color: #f3f4f6;
      padding: 40px 0;
    }

    .form-card {
      background-color: #1f2937;
      border-radius: 12px;
      padding: 30px;
      max-width: 850px;
      margin: auto;
      box-shadow: 0 0 15px rgba(0, 0, 0, 0.3);
    }

    .form-label {
      color: #e5e7eb;
      font-weight: 500;
    }

    .form-control,
    .form-select {
      background-color: #374151;
      color: #f9fafb;
      border: 1px solid #4b5563;
    }

    .form-control:focus {
      border-color: #3b82f6;
      box-shadow: 0 0 0 0.15rem rgba(59, 130, 246, 0.25);
    }

    h2 {
      font-size: 1.75rem;
      font-weight: bold;
      text-align: center;
      color: #f9fafb;
      margin-bottom: 30px;
    }

    .btn-primary {
      background-color: #3b82f6;
      border: none;
    }

    .btn-primary:hover {
      background-color: #2563eb;
    }

    #chkemail3 {
      font-size: 0.85rem;
    }
  </style>

  <script>
    function showPrev(fileRef, prevRef) {
      const [file] = fileRef.files;
      if (file) {
        prevRef.src = URL.createObjectURL(file);
      }
    }

    function showUer() {
      let activeUser = localStorage.getItem("activeUser");
      document.getElementById("txtEmail3").value = activeUser;
    }

    $(document).ready(function () {
      $("#sendtoserver").click(function () {
        let obj = {
          type: "get",
          url: "/get-to-server",
          data: {
            txtEmail3: $("#txtEmail3").val(),
            Event: $("#Event").val(),
            date: $("#date").val(),
            Time: $("#Time").val(),
            txtAddress: $("#txtAddress").val(),
            city: $("#city").val(),
            sports: $("#sports").val(),
            min: $("#min").val(),
            max: $("#max").val(),
            lastdate: $("#lastdate").val(),
            Fee: $("#Fee").val(),
            pmoney: $("#pmoney").val(),
            txtcontact: $("#txtcontact").val(),
          }
        };

        $.ajax(obj).then(function (resp) {
          if ($("#txtEmail3").val() != "") {
            $("#chkemail3").html("").removeClass();
            alert(resp);
          } else {
            $("#chkemail3").html("Email is required").addClass("text-danger");
          }
        }).fail(function (err) {
          alert(err.message);
        });
      });

      $("#txtEmail3").keyup(function () {
        let obj = {
          type: "get",
          url: "/chk-email-tour",
          data: {
            txtEmail3: $("#txtEmail3").val()
          }
        };
        $.ajax(obj).then(function (resp) {
          if (resp == "Invalid")
            $("#chkemail3").html("Invalid Email").addClass("text-danger");
          else
            $("#chkemail3").html("").removeClass();
        }).fail(function (err) {
          alert(err);
        });
      });
    });
  </script>
</head>

<body onload="showUer()">

  <div class="form-card mt-5">
    <h2>Post Tournament</h2>

    <form class="row g-3" method="post" enctype="multipart/form-data">
      <div class="col-md-8">
        <label class="form-label">Organizer Email</label>
        <input type="email" class="form-control" id="txtEmail3" name="txtEmail3" placeholder="example@domain.com" />
        <span id="chkemail3"></span>
      </div>

      <div class="col-md-5">
        <label class="form-label">Tournament Title</label>
        <input type="text" class="form-control" id="Event" name="Event" placeholder="e.g. Summer Cup 2025" readonly />
      </div>

      <div class="col-md-3">
        <label class="form-label">Date</label>
        <input type="date" class="form-control" id="date" name="date" />
      </div>

      <div class="col-md-3">
        <label class="form-label">Start Time</label>
        <input type="time" class="form-control" id="Time" name="Time" />
      </div>

      <div class="col-md-8">
        <label class="form-label">Venue Address</label>
        <input type="text" class="form-control" id="txtAddress" name="txtAddress" placeholder="Street, Area, Landmark" />
      </div>

      <div class="col-md-3">
        <label class="form-label">City</label>
        <input type="text" class="form-control" id="city" name="city" placeholder="e.g. Delhi" />
      </div>

      <div class="col-md-6">
        <label class="form-label">Sport Category</label>
        <select name="sports" id="sports" class="form-select">
          <optgroup label="Outdoor">
            <option value="cricket">Cricket</option>
            <option value="football">Football</option>
            <option value="hockey">Hockey</option>
            <option value="golf">Golf</option>
          </optgroup>
          <optgroup label="Indoor">
            <option value="chess">Chess</option>
            <option value="badminton">Badminton</option>
            <option value="table-tennis">Table Tennis</option>
            <option value="carrom">Carrom</option>
          </optgroup>
        </select>
      </div>

      <div class="col-md-3">
        <label class="form-label">Min Age</label>
        <input type="number" class="form-control" id="min" name="min" placeholder="e.g. 12" />
      </div>

      <div class="col-md-3">
        <label class="form-label">Max Age</label>
        <input type="number" class="form-control" id="max" name="max" placeholder="e.g. 25" />
      </div>

      <div class="col-md-5">
        <label class="form-label">Registration Deadline</label>
        <input type="date" class="form-control" id="lastdate" name="lastdate" />
      </div>

      <div class="col-md-3">
        <label class="form-label">Entry Fee (₹)</label>
        <input type="number" class="form-control" id="Fee" name="Fee" />
      </div>

      <div class="col-md-3">
        <label class="form-label">Total Prize Pool (₹)</label>
        <input type="number" class="form-control" id="pmoney" name="pmoney" />
      </div>

      <div class="col-md-6">
        <label class="form-label">Organizer Contact</label>
        <input type="text" class="form-control" id="txtcontact" name="txtcontact" placeholder="Phone or Email" />
      </div>

      <div class="col-12 d-flex justify-content-end mt-4">
        <button type="button" class="btn btn-primary" id="sendtoserver">Publish Tournament</button>
      </div>
    </form>
  </div>

</body>

</html>